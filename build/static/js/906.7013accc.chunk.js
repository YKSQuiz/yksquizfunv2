"use strict";(self.webpackChunkyks_quiz=self.webpackChunkyks_quiz||[]).push([[906],{8906:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var t=s(5043),r=s(7734),i=s(2185),c=s(6026),n=s(6150),l=s(108),d=s(5748),o=s(168),h=s(8420),m=s(8763),x=s(3831),u=(0,h.gu)({chartName:"BarChart",GraphicalChild:m.y,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:i.W},{axisType:"yAxis",AxisComp:c.h}],formatAxisMap:x.pr}),j=s(7574),p=s(1185),v=s(4298),g=s(579);const y=()=>{const{getMetrics:e,reportMetrics:a}=(0,j.eu)(),[s,h]=(0,t.useState)([]),[x,y]=(0,t.useState)(!1),[N,f]=(0,t.useState)(null),{variant:C,config:k}=(0,p.HC)("quiz_ui_variant"),{variant:T,config:b}=(0,p.HC)("question_loading"),S=(0,t.useMemo)(()=>[{title:"Memory Usage Over Time",dataKey:"memory",stroke:"#8884d8",type:"line"},{title:"Load Time Over Time",dataKey:"loadTime",stroke:"#82ca9d",type:"line"},{title:"Cache Hit Rate",dataKey:"cacheHitRate",fill:"#8884d8",type:"bar"},{title:"Network Speed",dataKey:"network",stroke:"#ffc658",type:"line"}],[]),H=(0,t.useCallback)(()=>{if(x)N&&(clearInterval(N),f(null)),y(!1);else{const e=setInterval(()=>{w()},5e3);f(e),y(!0)}},[x,N]),w=(0,t.useCallback)(()=>{var a;const s=(0,j.pX)(),t=(0,j.zu)(),r=e(),i={timestamp:Date.now(),memoryUsage:s?s.usedJSHeapSize/s.jsHeapSizeLimit*100:0,networkSpeed:t?t.downlink:0,loadTime:r.fetchQuestions?r.fetchQuestions.reduce((e,a)=>e+a,0)/r.fetchQuestions.length:0,cacheHitRate:r.cache_hit?r.cache_hit.length/(r.cache_hit.length+((null===(a=r.fetch_error)||void 0===a?void 0:a.length)||0))*100:0};h(e=>[...e.slice(-20),i])},[e]),M=(0,t.useCallback)(()=>{const e=JSON.stringify(s,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="performance-data.json",r.click()},[s]),R=(0,t.useMemo)(()=>s.map(e=>({time:new Date(e.timestamp).toLocaleTimeString(),memory:e.memoryUsage,network:e.networkSpeed,loadTime:e.loadTime,cacheHitRate:e.cacheHitRate})),[s]),L=(0,t.useMemo)(()=>{if(0===s.length)return null;const e=s[s.length-1],a=s.reduce((e,a)=>e+a.memoryUsage,0)/s.length,t=s.reduce((e,a)=>e+a.loadTime,0)/s.length,r=s.reduce((e,a)=>e+a.cacheHitRate,0)/s.length;return{currentMemory:(null===e||void 0===e?void 0:e.memoryUsage)||0,averageMemory:a,currentLoadTime:(null===e||void 0===e?void 0:e.loadTime)||0,averageLoadTime:t,currentCacheHitRate:(null===e||void 0===e?void 0:e.cacheHitRate)||0,averageCacheHitRate:r,dataPoints:s.length}},[s]);(0,t.useEffect)(()=>()=>{N&&clearInterval(N)},[N]);const A=(0,t.useCallback)(e=>{const a={...{data:R},children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.d,{strokeDasharray:"3 3"}),(0,g.jsx)(i.W,{dataKey:"time"}),(0,g.jsx)(c.h,{}),(0,g.jsx)(n.m,{})]})};return(0,g.jsxs)("div",{className:"chart-container",children:[(0,g.jsx)("h3",{children:e.title}),(0,g.jsx)(l.u,{width:"100%",height:300,children:"line"===e.type?(0,g.jsx)(d.b,{...a,children:(0,g.jsx)(o.N,{type:"monotone",dataKey:e.dataKey,stroke:e.stroke})}):(0,g.jsx)(u,{...a,children:(0,g.jsx)(m.y,{dataKey:e.dataKey,fill:e.fill})})})]},e.title)},[R]);return(0,g.jsx)(v.N4,{variant:"admin",showParticles:!0,particleCount:6,children:(0,g.jsxs)("div",{className:"performance-dashboard",children:[(0,g.jsxs)("div",{className:"dashboard-header",children:[(0,g.jsx)("h1",{children:"Performance Dashboard"}),(0,g.jsx)("button",{onClick:H,className:"monitoring-btn "+(x?"active":""),children:x?"Stop Monitoring":"Start Monitoring"})]}),(0,g.jsxs)("div",{className:"ab-test-section",children:[(0,g.jsx)("h2",{children:"AB Test Status"}),(0,g.jsxs)("div",{className:"ab-test-grid",children:[(0,g.jsxs)("div",{className:"ab-test-card",children:[(0,g.jsx)("h3",{children:"UI Variant"}),(0,g.jsxs)("p",{children:["Current: ",C]}),(0,g.jsxs)("p",{children:["Progress Bar: ",k.showProgressBar?"Yes":"No"]}),(0,g.jsxs)("p",{children:["Animation Speed: ",k.animationSpeed]})]}),(0,g.jsxs)("div",{className:"ab-test-card",children:[(0,g.jsx)("h3",{children:"Loading Variant"}),(0,g.jsxs)("p",{children:["Current: ",T]}),(0,g.jsxs)("p",{children:["Cache Size: ",b.cacheSize]}),(0,g.jsxs)("p",{children:["Strategy: ",b.loadingStrategy]})]})]})]}),L&&(0,g.jsxs)("div",{className:"performance-summary",children:[(0,g.jsx)("h2",{children:"Performance Summary"}),(0,g.jsxs)("div",{className:"summary-grid",children:[(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Memory Usage"}),(0,g.jsxs)("p",{className:"current",children:[L.currentMemory.toFixed(2),"%"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",L.averageMemory.toFixed(2),"%"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Load Time"}),(0,g.jsxs)("p",{className:"current",children:[L.currentLoadTime.toFixed(2),"ms"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",L.averageLoadTime.toFixed(2),"ms"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Cache Hit Rate"}),(0,g.jsxs)("p",{className:"current",children:[L.currentCacheHitRate.toFixed(2),"%"]}),(0,g.jsxs)("p",{className:"average",children:["Avg: ",L.averageCacheHitRate.toFixed(2),"%"]})]}),(0,g.jsxs)("div",{className:"summary-card",children:[(0,g.jsx)("h3",{children:"Data Points"}),(0,g.jsx)("p",{className:"current",children:L.dataPoints})]})]})]}),R.length>0&&(0,g.jsxs)("div",{className:"charts-section",children:[(0,g.jsx)("h2",{children:"Performance Charts"}),(0,g.jsx)("div",{className:"chart-grid",children:S.map(A)})]}),(0,g.jsxs)("div",{className:"export-section",children:[(0,g.jsx)("h2",{children:"Export Data"}),(0,g.jsx)("button",{onClick:a,children:"Export Metrics"}),(0,g.jsx)("button",{onClick:M,children:"Export Performance Data"})]})]})})}}}]);
//# sourceMappingURL=906.7013accc.chunk.js.map